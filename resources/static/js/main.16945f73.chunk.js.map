{"version":3,"sources":["api/Api.js","App.js","custom-element/et-app.js"],"names":["strapiEndPoint","process","getTemplateById","templateId","a","axios","get","getContentById","contentName","contentId","console","error","url","addAuthorizationRequestConfig","data","getDefaultOptions","defaultBearer","token","window","entando","keycloak","authenticated","localStorage","getItem","headers","Authorization","config","defaultOptions","App","name","nameTwo","useState","templateData","setTemplateData","contentData","setContentData","log","useEffect","getTemplate","getContent","JSON","stringify","ATTRIBUTES","selectedTemplateId","selectedContentId","selectedContentName","WidgetElement","oldValue","newValue","Object","values","includes","Error","this","mountPoint","render","document","createElement","appendChild","getAttribute","ReactDOM","HTMLElement","customElements","define"],"mappings":"wRAEMA,EAAc,UAAMC,WAYbC,GAXI,UAAMD,4BAAN,uBAWW,uCAAG,WAAOE,GAAP,SAAAC,EAAA,sEACdC,IAAMC,IAAN,UAAaL,4BAAb,qBAA8DE,IADhD,mFAAH,uDAUdI,EAAc,uCAAG,gDAAAH,EAAA,6DAAOI,EAAP,+BAAqB,SAAUC,EAA/B,uBACtBD,GAAgBC,GAAWC,QAAQC,MAAMH,EAAaC,GACrDG,EAFqB,UAEZZ,EAFY,0CAE4C,SAF5C,IAEwD,SAFxD,YAEoES,GAFpE,SAGJJ,IAAMC,IAAIM,EAAKC,EAA8B,GAAI,eAH7C,uBAGnBC,EAHmB,EAGnBA,KAHmB,kBAKpBA,GALoB,2CAAH,qDAgBtBC,EAAoB,SAACC,GACvB,IAAMC,EARFC,QAAUA,OAAOC,SAAWD,OAAOC,QAAQC,UAAYF,OAAOC,QAAQC,SAASC,cACxEH,OAAOC,QAAQC,SAASH,MAExBK,aAAaC,QAAQ,SAMhC,OAAKN,EAaE,CACHO,QAAS,CACLC,cAAc,GAAD,OAAKT,EAAL,YAAsBC,KAbjB,eAAlBD,EACO,CACHQ,QAAS,CACLC,cAAc,UAAD,OAAY,+IAI1B,IAYNZ,EAAgC,WAA4C,IAA3Ca,EAA0C,uDAAjC,GAAIV,EAA6B,uDAAb,SACnEW,EAAiBZ,EAAkBC,GACvC,OAAO,2BACAU,GACAC,I,eCxCIC,MArBf,YAAwD,IAAzCC,EAAwC,EAAxCA,KAAMC,EAAkC,EAAlCA,QAAS3B,EAAyB,EAAzBA,WAAYM,EAAa,EAAbA,UACtC,EAAwCsB,mBAAS,MAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KACA,EAAsCF,mBAAS,MAA/C,mBAAOG,EAAP,KAAoBC,EAApB,KAWA,OATAzB,QAAQ0B,IAAIP,EAAMC,EAAS3B,EAAYM,GAEvC4B,oBAAS,sBAAC,8BAAAjC,EAAA,sEACoBF,EAAgBC,GADpC,cACAmC,EADA,gBAEmB/B,EAAesB,EAAMpB,GAFxC,OAEA8B,EAFA,OAGNN,EAAgBK,GAChBH,EAAeI,GAJT,4CAQN,qCACI,8BAAMP,EAAeQ,KAAKC,UAAUT,GAAgB,6BACpD,8BAAMA,EAAeQ,KAAKC,UAAUP,GAAe,iCClBzDQ,EAAa,CACfb,KAAM,OACNC,QAAS,UACTa,mBAAoB,qBACpBC,kBAAmB,oBACnBC,oBAAqB,uBAGnBC,E,8KAMF,SAAyBjB,EAAMkB,EAAUC,GACrC,IAAKC,OAAOC,OAAOR,GAAYS,SAAStB,GACpC,MAAM,IAAIuB,MAAJ,uCAA0CvB,IAEhDwB,KAAKC,YAAcN,IAAaD,GAChCM,KAAKE,W,+BAIb,WACIF,KAAKC,WAAaE,SAASC,cAAc,OACzCJ,KAAKK,YAAYL,KAAKC,YACtBD,KAAKE,W,oBAGT,WACI,IAAM1B,EAAOwB,KAAKM,aAAajB,EAAWb,MACpCC,EAAUuB,KAAKM,aAAajB,EAAWZ,SACvC3B,EAAakD,KAAKM,aAAajB,EAAWC,oBAC1ClC,EAAY4C,KAAKM,aAAajB,EAAWE,mBACzCpC,EAAc6C,KAAKM,aAAajB,EAAWG,qBACjDe,IAASL,OACL,cAAC,EAAD,CAAK1B,KAAMA,EAAMC,QAASA,EAAS3B,WAAYA,EAAYM,UAAWA,EAAWD,YAAaA,IAC9F6C,KAAKC,e,+BA3Bb,WACI,OAAOL,OAAOC,OAAOR,O,eAHDmB,cAkC5BC,eAAeC,OAAO,YAAajB,K","file":"static/js/main.16945f73.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst strapiEndPoint = `${process.env.REACT_APP_STRAPI_API_URL}`;\nconst apiEndPoint = `${process.env.REACT_APP_PUBLIC_API_URL}/template/searchby/`;\n\nexport const getTemplate = async (searchby = 'code', searchTerm) => {\n    return await axios.get(`${apiEndPoint}${searchby}/${searchTerm}`)\n}\n\n/**\n * getTemplateById Search Template By Id.\n * @param {*} templateId : TemplateId.\n * @returns \n */\nexport const getTemplateById = async (templateId) => {\n    return await axios.get(`${process.env.REACT_APP_PUBLIC_API_URL}/template/${templateId}`);\n}\n\n/**\n * getContentById Search Content By Id.\n * @param {*} contentType \n * @param {*} contentId \n * @returns \n */\n export const getContentById = async (contentName = 'banner', contentId) => {\n    if (!contentName || !contentId) console.error(contentName, contentId);\n    const url = `${strapiEndPoint}/content-manager/collection-types/api::${'banner'}.${'banner'}/${contentId}`;\n    const { data } = await axios.get(url, addAuthorizationRequestConfig({}, 'EntKcToken'))\n\n    return data;\n}\n\nconst getKeycloakToken = () => {\n    if (window && window.entando && window.entando.keycloak && window.entando.keycloak.authenticated) {\n        return window.entando.keycloak.token\n    } else {\n        return localStorage.getItem('token');\n    }\n}\n\nconst getDefaultOptions = (defaultBearer) => {\n    const token = getKeycloakToken()\n    if (!token) {\n        //Below if condition is to run the strapi API in local\n        if (defaultBearer === 'EntKcToken') {\n            return {\n                headers: {\n                    Authorization: `Bearer ${'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjUxNjY2ODY3LCJleHAiOjE2NTQyNTg4Njd9.HDMO-g89iRacB-9m8yQ39w4Rh4wNOR9xCL1dH1whPSE'}`\n                },\n            }\n        } else {\n            return {}\n        }\n    }\n    // logic to add token for both strapi and MS api\n    return {\n        headers: {\n            Authorization: `${defaultBearer} ${token}`,\n        },\n    }\n}\n\n// Get authorization tokens\nexport const addAuthorizationRequestConfig = (config = {}, defaultBearer = 'Bearer') => {\n    let defaultOptions = getDefaultOptions(defaultBearer);\n    return {\n        ...config,\n        ...defaultOptions\n    }\n}","import React, { useEffect, useRef, useState } from 'react';\nimport { getContentById, getTemplateById } from './api/Api';\nimport './app.css';\n\nconst domain = 'http://localhost:1337'\n\nfunction App({ name, nameTwo, templateId, contentId }) {\n    const [templateData, setTemplateData] = useState(null);\n    const [contentData, setContentData] = useState(null);\n\n    console.log(name, nameTwo, templateId, contentId);\n\n    useEffect(async () => {\n        const getTemplate = await getTemplateById(templateId);\n        const getContent = await getContentById(name, contentId);\n        setTemplateData(getTemplate);\n        setContentData(getContent)\n    })\n\n    return (\n        <>\n            <div>{templateData ? JSON.stringify(templateData) : 'Loading OR Check Network'}</div>\n            <div>{templateData ? JSON.stringify(contentData) : 'Loading OR Check Network'}</div>\n        </>\n    );\n}\n\nexport default App;\n","import ReactDOM from \"react-dom\"\nimport React from \"react\"\nimport App from '../App'\n\nconst ATTRIBUTES = {\n    name: 'name',\n    nameTwo: 'nameTwo',\n    selectedTemplateId: 'selectedTemplateId',\n    selectedContentId: 'selectedContentId',\n    selectedContentName: 'selectedContentName',\n};\n\nclass WidgetElement extends HTMLElement {\n\n    static get observedAttributes() {\n        return Object.values(ATTRIBUTES);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (!Object.values(ATTRIBUTES).includes(name)) {\n            throw new Error(`Untracked changed attribute: ${name}`);\n        }\n        if (this.mountPoint && newValue !== oldValue) {\n            this.render();\n        }\n    }\n\n    connectedCallback() {\n        this.mountPoint = document.createElement('div');\n        this.appendChild(this.mountPoint);\n        this.render();\n    }\n\n    render() {\n        const name = this.getAttribute(ATTRIBUTES.name);\n        const nameTwo = this.getAttribute(ATTRIBUTES.nameTwo);\n        const templateId = this.getAttribute(ATTRIBUTES.selectedTemplateId);\n        const contentId = this.getAttribute(ATTRIBUTES.selectedContentId);\n        const contentName = this.getAttribute(ATTRIBUTES.selectedContentName);\n        ReactDOM.render(\n            <App name={name} nameTwo={nameTwo} templateId={templateId} contentId={contentId} contentName={contentName} />,\n            this.mountPoint\n        );\n    }\n}\n\ncustomElements.define('my-widget', WidgetElement);\n\nexport default WidgetElement;\n\n"],"sourceRoot":""}