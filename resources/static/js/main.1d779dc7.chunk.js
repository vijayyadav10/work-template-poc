(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{294:function(e,t,n){},734:function(e,t,n){},737:function(e,t,n){"use strict";n.r(t);n(294);var a,r=n(21),o=n(22),s=n(23),c=n(25),i=n(293),l=n(1),u=n.n(l),p=n(8),d=n.n(p),m=n(17),h=n(9),b=n.n(h),f=n(7),g=n(115),j=n(290),O=n(2),C=n.n(O),y=n(43),w=n(291),x=n(292),v=n(3),S=[],R=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).totalPages=function(){var e=a.state.pagination.perPage;return Math.ceil(S.length/e)},a.onPageInput=function(e){a.setState({pageChangeValue:e.target.value})},a.onSubmit=function(){a.setPage(a.state.pageChangeValue)},a.setPage=function(e){var t=Number(e);if(!Number.isNaN(e)&&""!==e&&t>0&&t<=a.totalPages()){var n=Object.assign({},a.state.pagination);n.page=t,a.setState({pagination:n,pageChangeValue:t})}},a.onPerPageSelect=function(e,t){var n=Object.assign({},a.state.pagination);n.perPage=e,n.page=1,a.setState({pagination:n})},a.onFirstPage=function(){a.setPage(1)},a.onPreviousPage=function(){a.state.pagination.page>1&&a.setPage(a.state.pagination.page-1)},a.onNextPage=function(){a.state.pagination.page<a.totalPages()&&a.setPage(a.state.pagination.page+1)},a.onLastPage=function(){var e=a.state.pagination.page,t=a.totalPages();e<t&&a.setPage(t)},a.onSelectRow=function(e,t){var r,o,s=a.props.onRowsLogger,c=a.state,i=c.rows,l=c.selectedRows,u=i.findIndex((function(e){return e.id===t.id}));u>-1&&(t.selected?(r=l.filter((function(e){return!(e===t.id)})),o=n.deselectRow(t)):(l.push(t.id),r=l,o=n.selectRow(t)),i[u]=o,a.setState({rows:i,selectedRows:r}),s(i.filter((function(e){return e.selected}))))},a.onSelectAllRows=function(e){var t=a.props.onRowsLogger,r=a.state,o=r.rows,s=r.selectedRows,c=e.target.checked,i=a.currentRows().rows;if(c){var l=Object(g.a)(new Set([].concat(Object(g.a)(i.map((function(e){return e.id}))),Object(g.a)(s)))),u=o.map((function(e){return l.indexOf(e.id)>-1?n.selectRow(e):e}));a.setState({rows:u,selectedRows:l}),t(u.filter((function(e){return e.selected})))}else{var p=i.map((function(e){return e.id})),d=s.filter((function(e){return!(p.indexOf(e)>-1)})),m=o.map((function(e){return d.indexOf(e.id)>-1?e:n.deselectRow(e)}));a.setState({rows:m,selectedRows:d}),t(m.filter((function(e){return e.selected})))}},a.onRow=function(e,t){var n=t.rowIndex;console.log("ROW, ROWINDEX",e,n),console.log("HAA this.props.setSelectedContent",a.props.selectedCollectionType),a.props.setSelectedContent([e],a.props.selectedCollectionType);var r=S.indexOf(e.id)>-1;return{className:C()({selected:r}),role:"row"}};var o=function(){return a.state.sortingColumns||{}},s=y.sort({getSortingColumns:o,onSort:function(e){a.setState({sortingColumns:y.byColumn({sortingColumns:a.state.sortingColumns,sortingOrder:f.defaultSortingOrder,selectedColumn:e})})},strategy:y.strategies.byProperty}),c=y.header({sortableTransform:s,getSortingColumns:o,strategy:y.strategies.byProperty});return a.customHeaderFormatters=f.customHeaderFormattersDefinition,a.state={selectedContent:[],sortingColumns:{name:{direction:f.TABLE_SORT_DIRECTION.ASC,position:0}},columns:[{property:"select",displayName:"Select",header:{label:"select",props:{index:0,rowSpan:1,colSpan:1,id:"select"},transforms:[s],formatters:[c],customFormatters:[f.sortableHeaderCellFormatter]},cell:{props:{index:0},formatters:[function(e,t){var n=t.rowData,r=t.rowIndex;return Object(f.selectionCellFormatter)({rowData:n,rowIndex:r},a.onSelectRow,"vybrat ".concat(r),"vyberte \u0159\xe1dek ".concat(r))}]}},{property:"Title",displayName:"Names",header:{label:"Name",props:{index:1,rowSpan:1,colSpan:1},transforms:[s],formatters:[c],customFormatters:[f.sortableHeaderCellFormatter]},cell:{props:{index:1},formatters:[f.tableCellFormatter]}},{property:"createdBy",header:{label:"Created by",props:{index:2,rowSpan:1,colSpan:1},transforms:[s],formatters:[c],customFormatters:[f.sortableHeaderCellFormatter]},cell:{props:{index:2},formatters:[f.tableCellFormatter]}},{property:"updatedAt",header:{label:"Last edited",props:{index:3,rowSpan:1,colSpan:1},transforms:[s],formatters:[c],customFormatters:[f.sortableHeaderCellFormatter]},cell:{props:{index:3},formatters:[f.tableCellFormatter]}},{property:"Type",header:{label:"Type",props:{index:4,rowSpan:1,colSpan:1},transforms:[s],formatters:[c],customFormatters:[f.sortableHeaderCellFormatter]},cell:{props:{index:4},formatters:[f.tableCellFormatter]}},{property:"createdAt",header:{label:"Created date",props:{index:5,rowSpan:1,colSpan:1},transforms:[s],formatters:[c],customFormatters:[f.sortableHeaderCellFormatter]},cell:{props:{index:5},formatters:[f.tableCellFormatter]}},{property:"status",header:{label:"Status",props:{index:6,rowSpan:1,colSpan:1},transforms:[s],formatters:[c],customFormatters:[f.sortableHeaderCellFormatter]},cell:{props:{index:6},formatters:[f.tableCellFormatter]}}],rows:a.props.mockRows,selectedRows:[],pagination:{page:1,perPage:6,perPageOptions:[6,10,15]},pageChangeValue:1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.mockRows&&this.setState({rows:this.props.mockRows})}},{key:"componentDidUpdate",value:function(e,t){this.props.mockRows!==e.mockRows&&this.setState({rows:this.props.mockRows})}},{key:"currentRows",value:function(){var e=this.state,t=e.rows,n=e.sortingColumns,a=e.columns,r=e.pagination;return Object(x.a)(Object(f.paginate)(r),y.sorter({columns:a,sortingColumns:n,sort:j.orderBy,strategy:y.strategies.byProperty}))(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.columns,a=t.pagination,r=t.sortingColumns,o=t.pageChangeValue,s=this.currentRows();return Object(v.jsxs)(f.Grid,{fluid:!0,children:[Object(v.jsxs)(f.Table.PfProvider,{striped:!0,bordered:!0,hover:!0,dataTable:!0,columns:n,components:{header:{cell:function(t){return e.customHeaderFormatters({cellProps:t,columns:n,sortingColumns:r,rows:s.rows,onSelectAllRows:e.onSelectAllRows})}}},children:[Object(v.jsx)(f.Table.Header,{headerRows:w.headerRows({columns:n})}),Object(v.jsx)(f.Table.Body,{rows:s.rows,rowKey:"id",onRow:this.onRow})]}),Object(v.jsx)(f.PaginationRow,{viewType:f.PAGINATION_VIEW.TABLE,pagination:a,pageInputValue:o,amountOfPages:s.amountOfPages,itemCount:s.itemCount,itemsStart:s.itemsStart,itemsEnd:s.itemsEnd,onPerPageSelect:this.onPerPageSelect,onFirstPage:this.onFirstPage,onPreviousPage:this.onPreviousPage,onPageInput:this.onPageInput,onNextPage:this.onNextPage,onLastPage:this.onLastPage,onSubmit:this.onSubmit})]})}}],[{key:"selectRow",value:function(e){return Object.assign({},e,{selected:!0})}},{key:"deselectRow",value:function(e){return Object.assign({},e,{selected:!1})}}]),n}(u.a.Component),T=n(11),I=(n(94),n(79)),P=n(12),N=n(49),k=n(64),F=n.n(k),A=function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjQ3Mjc5NTA1LCJleHAiOjE2NDk4NzE1MDV9.qDiphqD-LOC6iXPfuIIMaS951f2jZG-z-rqgoqRIA6I",e.next=3,F.a.get("http://localhost:1337/content-manager/content-types",{headers:{Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjQ3Mjc5NTA1LCJleHAiOjE2NDk4NzE1MDV9.qDiphqD-LOC6iXPfuIIMaS951f2jZG-z-rqgoqRIA6I")}});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://localhost:1337/api/"+t+"?populate=Image",e.next=3,F.a.get(n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetchContents",t),e.next=3,E(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(m.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error("collectionType or contentName is missing");case 2:return a="http://localhost:1337/api/".concat(t,"?filters[title][$containsi]=").concat(n),e.next=5,F.a.get(a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("http://localhost:8082/api/getcollectiontype");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=(n(734),n(82)),B=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.props.runOnFilterData(a.state.values.name)},a.handleInputChange=function(e){a.setState({values:Object(H.a)({},e.target.name,e.target.value)})},a.onClick=function(){a.setState({open:!a.state.open})},a.state={open:!1,values:{name:""}},a}return Object(o.a)(n,[{key:"handleKeyDown",value:function(){}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"ContentsFilter well",role:"button",tabIndex:0,style:{margin:"1rem 0rem"},children:Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(v.jsxs)("div",{style:{display:"flex",margin:"1rem 0rem"},children:[Object(v.jsxs)("button",{id:"dropdown-example",role:"button","aria-haspopup":"true","aria-expanded":"false",type:"button",className:"dropdown-toggle btn btn-default",children:["Name ",Object(v.jsx)("span",{className:"caret"})]}),Object(v.jsx)("input",{type:"search",name:"name",value:this.state.values.name,onChange:this.handleInputChange,role:"combobox",className:"rbt-input-main form-control rbt-input",placeholder:"Search Content"})]}),Object(v.jsx)("div",{className:"pull-right mbt10",style:{margin:"0 0 10px 0"},children:Object(v.jsx)("button",{className:"btn btn-primary",children:"Search"})})]})})}}]),n}(u.a.Component),J=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).runOnFilterData=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(a.state.selectedCollectionType,t).then((function(e){var t=e.data.data.map((function(e){return e.attributes.id=e.id,e.attributes.createdBy="Admin",e.attributes.status="Published",e.attributes}));a.setState({mockRows:t})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.componentDidMount=function(){},a.close=function(){a.setState({show:!1})},a.open=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({show:!0}),e.next=3,A();case 3:t=(t=e.sent).data.data.filter((function(e){return e&&e.uid&&e.uid.startsWith("api::")&&e.isDisplayed})),n=[],t.length&&t.forEach((function(e){n.push(e.info)})),a.setState({collectionTypes:n});case 8:case"end":return e.stop()}}),e)}))),a.collectionTypeOnChange=function(e){e.persist(),a.state.collectionTypes.forEach(function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.singularName!==e.target.value||!e.target.value){t.next=4;break}return a.setState({selectedCollectionType:n.pluralName}),t.next=4,D(n.pluralName).then((function(e){var t=e.data.data.map((function(e){return e.attributes.id=e.id,e.attributes.createdBy="Admin",e.attributes.status="Published",e.attributes}));a.setState({mockRows:t})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},a.state={show:!1,collectionTypes:[],mockRows:[],selectedContent:[],selectedCollectionType:null},a}return Object(o.a)(n,[{key:"render",value:function(){return console.log("THIS.STATE.COLLECTIONTYPES",this.state),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{style:{marginBottom:"1rem"},type:"submit",value:"Submit",className:"btn btn-primary pull-right",onClick:this.open,children:"Add existing content"}),Object(v.jsxs)(N.Modal,{dialogClassName:"ContentsFilterModal",show:this.state.show,onHide:this.close,children:[Object(v.jsxs)(N.Modal.Header,{children:[Object(v.jsx)("button",{className:"close",onClick:this.close,"aria-hidden":"true","aria-label":"Close",children:Object(v.jsx)(P.Icon,{type:"pf",name:"close"})}),Object(v.jsx)(N.Modal.Title,{children:"Select one content item"})]}),Object(v.jsxs)(N.Modal.Body,{children:[Object(v.jsx)("div",{className:"CollapsibleSection__title no-padding",role:"button",tabIndex:0}),Object(v.jsxs)(I.Row,{children:[Object(v.jsx)("label",{className:"control-label col-xs-3",htmlFor:"group",children:"Collection Type"}),Object(v.jsx)(I.Col,{xs:9,children:Object(v.jsxs)("select",{className:"form-control",name:"group","data-testid":"TEST_ID_USER_AUTHORITY_MODAL.GROUP_FIELD",onChange:this.collectionTypeOnChange,children:[Object(v.jsx)("option",{value:0,children:"Select Collection Type"}),this.state.collectionTypes.length&&this.state.collectionTypes.map((function(e,t){return Object(v.jsx)("option",{value:e.singularName,children:e.pluralName},e.singularName)}))]})})]}),Object(v.jsx)(B,{runOnFilterData:this.runOnFilterData}),Object(v.jsx)(R,{onRowsLogger:function(){},mockRows:this.state.mockRows,selectedCollectionType:this.state.selectedCollectionType,setSelectedContent:this.props.setSelectedContent})]}),Object(v.jsxs)(N.Modal.Footer,{children:[Object(v.jsx)(T.Button,{bsStyle:"default",className:"btn-cancel",onClick:this.close,children:"Cancel"}),Object(v.jsx)(T.Button,{bsStyle:"primary",onClick:this.close,children:"Choose"})]})]})]})}}]),n}(l.Component),_=(n(37),function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("table",{className:"table table-bordered table-datatable table-hover table-striped Contents__table-element",children:[Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:Object.keys(V).map((function(e,t){return Object(v.jsx)("th",{children:V[e]},t)}))})}),Object(v.jsx)("tbody",{children:Object(v.jsx)("tr",{children:this.props.content[0]&&Object.keys(this.props.content[0]).map((function(t,n){if(V.hasOwnProperty(t))return Object(v.jsx)("td",{children:e.props.content[0][t]},n)}))})})]})})}}]),n}(u.a.Component)),V=(a={Title:"Name",createdAt:"Created by",updatedAt:"Last edited",Type:"Type"},Object(H.a)(a,"createdAt","Created date"),Object(H.a)(a,"status","Status"),a),G=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).onChangeTemplateId=function(e){a.setState({selectedTemplateId:e.target.value})},a.setSelectedContent=function(e,t){console.log("I am in app",t,e),a.setState({selectedContent:e}),a.setState({name:e}),a.setState({nameTwo:encodeURIComponent(JSON.stringify(e))}),a.setState({selectedContentId:e[0].id}),console.log("APPA",a.state)},a.handleTypeaheadChangeContentType=function(e){var t=e.map((function(e){return e.label}));a.setState({contentType:t})},a.componentDidMount=Object(m.a)(b.a.mark((function e(){var t,n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=(t=e.sent).data.data.filter((function(e){return e&&e.uid&&e.uid.startsWith("api::")&&e.isDisplayed})),n=[],t.length&&t.forEach((function(e){n.push({label:e.info.pluralName})})),e.next=8,M();case 8:r=e.sent,o=r.data,console.log("TEMPLATESLIST",o),a.setState({contentType:o,collectionTypes:o});case 12:case"end":return e.stop()}}),e)}))),a.state={selectedContent:[],name:null,nameTwo:null,contentType:[],collectionTypes:[],selectedContentId:0,selectedTemplateId:"default"},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return console.log("XYZ",this.state.name),Object(v.jsxs)("div",{style:{margin:"8rem"},children:[Object(v.jsx)(J,{rightSide:!1,setSelectedContent:this.setSelectedContent}),Object(v.jsx)("div",{style:{marginTop:"1rem"}}),Object(v.jsx)(_,{content:this.state.selectedContent}),0!=this.state.selectedContentId&&Object(v.jsx)("div",{style:{marginTop:"1rem"},children:Object(v.jsxs)("select",{name:"modelId",className:"form-control",onChange:this.onChangeTemplateId,children:[Object(v.jsx)("option",{value:"default",children:"Default"}),this.state.contentType.map((function(t,n){if(t.collectiontype.toLowerCase()===e.state.name[0].Type.toLowerCase())return Object(v.jsx)("option",{value:t.code,children:t.templatename},n)}))]})})]})}}]),n}(l.Component),U=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).reactRootRef=u.a.createRef(),e.mountPoint=null,e}return Object(o.a)(n,[{key:"config",get:function(){return console.log("GET CONFIG THIS.REACTROOTREF.CURRENT",this.reactRootRef.current),this.reactRootRef.current?this.reactRootRef.current.state:{}},set:function(e){return console.log("BALUE",e),console.log("SET CONFIG",this.reactRootRef.current),this.reactRootRef.current.setState(e)}},{key:"connectedCallback",value:function(){this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),d.a.render(Object(v.jsx)(G,{ref:this.reactRootRef}),this.mountPoint)}}]),n}(Object(i.a)(HTMLElement));window.customElements.define("my-widget-config",U);n(735),n(736)}},[[737,1,2]]]);
//# sourceMappingURL=main.1d779dc7.chunk.js.map