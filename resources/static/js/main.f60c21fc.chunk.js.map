{"version":3,"sources":["api/Api.js","helper/TemplateComponent.js","App.js","custom-element/et-app.js"],"names":["strapiEndPoint","process","apiEndPoint","getTemplate","a","searchby","searchTerm","axios","get","getTemplateById","templateId","getContentById","contentName","contentId","console","error","url","addAuthorizationRequestConfig","data","getDefaultOptions","defaultBearer","token","window","entando","keycloak","authenticated","headers","Authorization","config","defaultOptions","TemplateComponent","css","template","domain","App","name","nameTwo","log","nameTwoArr","JSON","parse","decodeURIComponent","dataNameTwo","useState","html","setHtml","bold","text","render","bannerType","setData","useEffect","dataTemplateId","dataContentById","strapiData","attributes","hbr","contentshape","imgPath","img","content","style","backgroundColor","borderCollapse","border","color","width","padding","cellPadding","cellSpacing","className","Object","keys","map","item","idx","hasOwnProperty","el","boxShadow","height","borderBottom","id","version","email","address","createdAt","updatedAt","publishedAt","ATTRIBUTES","selectedTemplateId","selectedContentId","selectedContentName","WidgetElement","oldValue","newValue","values","includes","Error","this","mountPoint","document","createElement","appendChild","getAttribute","ReactDOM","HTMLElement","customElements","define"],"mappings":"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","file":"static/js/main.f60c21fc.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst strapiEndPoint = `${process.env.REACT_APP_STRAPI_API_URL}`;\nconst apiEndPoint = `${process.env.REACT_APP_PUBLIC_API_URL}/template/searchby/`;\n\nexport const getTemplate = async (searchby = 'code', searchTerm) => {\n    return await axios.get(`${apiEndPoint}${searchby}/${searchTerm}`)\n}\n\n/**\n * getTemplateById Search Template By Id.\n * @param {*} templateId : TemplateId.\n * @returns \n */\nexport const getTemplateById = async (templateId) => {\n    return await axios.get(`${process.env.REACT_APP_PUBLIC_API_URL}/template/${templateId}`);\n}\n\n/**\n * getContentById Search Content By Id.\n * @param {*} contentType \n * @param {*} contentId \n * @returns \n */\nexport const getContentById = async (contentName, contentId) => {\n    if (!contentName || !contentId) console.error(contentName, contentId);\n    const url = `${strapiEndPoint}/content-manager/collection-types/api::${contentName}.${contentName}/${contentId}`;\n    const { data } = await axios.get(url, addAuthorizationRequestConfig({}, 'EntKcToken'))\n\n    return data;\n}\n\nconst getKeycloakToken = () => {\n    if (window && window.entando && window.entando.keycloak && window.entando.keycloak.authenticated) {\n        return window.entando.keycloak.token\n    }\n    return ''\n}\n\nconst getDefaultOptions = (defaultBearer) => {\n    const token = getKeycloakToken()\n    if (!token) {\n        //Below if condition is to run the strapi API in local\n        if (defaultBearer === 'EntKcToken') {\n            return {\n                headers: {\n                    Authorization: `Bearer ${'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiaWF0IjoxNjUxNjY2ODY3LCJleHAiOjE2NTQyNTg4Njd9.HDMO-g89iRacB-9m8yQ39w4Rh4wNOR9xCL1dH1whPSE'}`\n                },\n            }\n        } else {\n            return {}\n        }\n    }\n    // logic to add token for both strapi and MS api\n    return {\n        headers: {\n            Authorization: `${defaultBearer} ${token}`,\n        },\n    }\n}\n\n// Get authorization tokens\nexport const addAuthorizationRequestConfig = (config = {}, defaultBearer = 'Bearer') => {\n    let defaultOptions = getDefaultOptions(defaultBearer);\n    return {\n        ...config,\n        ...defaultOptions\n    }\n}","import Template from \"react-mustache-template-component\";\n\nexport default function TemplateComponent({ css, template, data }) {\n    return (\n        <>\n            <Template template={template} data={data} css={css} />\n        </>\n    );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { getContentById, getTemplate, getTemplateById } from './api/Api';\nimport TemplateComponent from './helper/TemplateComponent';\nimport axios from 'axios';\nimport './app.css';\n\nconst domain = 'http://localhost:1337'\n\nfunction App({ name, nameTwo, templateId, contentId, contentName }) {\n    \n    console.log('NAME, NAMETWO, TEMPLATEID, CONTENTID -1', name, nameTwo, templateId, contentId);\n    if (!name) {\n        name = 'test data transfer';\n    }\n\n    if (!nameTwo) {\n        nameTwo = nameTwo = '[{\"name\":\"customer 1\",\"email\":\"customer1@entando.com\",\"address\":\"San Jose, CA\",\"createdAt\":\"2022-03-14T18:41:51.579Z\",\"updatedAt\":\"2022-03-14T18:49:55.562Z\",\"publishedAt\":\"2022-03-14T18:49:55.559Z\",\"id\":1,\"selected\":true}]';\n    }\n    const nameTwoArr = JSON.parse(decodeURIComponent(nameTwo));\n    const dataNameTwo = JSON.parse(decodeURIComponent(nameTwo))[0];\n\n    if (!templateId) {\n        templateId = '9';\n    }\n\n    if (!contentId) {\n        contentId = 'test contentId';\n    }\n    console.log('NAME, NAMETWO, TEMPLATEID, CONTENTID static data - ', name, nameTwo, templateId, contentId);\n\n\n    const [css] = useState(\n        `#header {\n          background:red;\n          padding:10px;\n        }`\n    ); // compiled scss\n\n    const [html, setHtml] = useState(`\n      <div id=\"wrapper\">\n        <h1 className=\"title\">{{name}}</h1>\n      </div>\n      `); // template\n\n    const [data, setData] = useState({\n        name: \"Static\",\n        bold: function () {\n            return function (text, render) {\n                return;\n            };\n        },\n        bannerType: \"wideBanner\"\n    })\n\n    useEffect(() => {\n        (async () => {\n            const dataTemplateId = await getTemplateById(48);\n            const dataContentById = await getContentById(contentName, contentId);\n            console.log('dataTemplateId', dataTemplateId);\n            console.log('dataContentById', dataContentById);\n            const { data } = await getTemplate('code', templateId);\n            const { data: strapiData } = await axios.get(`${domain}/api/projects?populate=img`);\n            console.log('core Data', strapiData.data);\n            console.log(\"STRAPIDATA\", strapiData.data[0].attributes);\n            console.log('just for now', data);\n            const hbr = `${data[0].contentshape}`;\n            console.log(\"HBR\",hbr)\n            setHtml(hbr);\n            const imgPath = `${domain}${strapiData.data[0].attributes.img.data.attributes.url}`;\n            console.log(domain+strapiData.data[0].attributes.img.data.attributes.url)\n            setData({content: {...strapiData.data[0].attributes, img: imgPath}})\n        })()\n    }, [])\n\n    return (\n        <>\n            <div>\n                <TemplateComponent css={css} template={html} data={data} />\n            </div>\n            <hr></hr>\n            <table style={{ backgroundColor: \"#FFFFCC\", borderCollapse: \"collapse\", border: \"1px solid #FFCC00\", color: \"#000000\", width: \"100%\", padding: \"10px\" }} cellPadding=\"3\" cellSpacing=\"3\" className=\"table table-bordered table-datatable table-hover table-striped Contents__table-element\">\n                <thead>\n                    <tr>\n                        {Object.keys(dataNameTwo).map((item, idx) => <th key={idx}>{item}</th>)}\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        {Object.keys(dataNameTwo) && Object.keys(dataNameTwo).map((item, idx) => {\n                            if (dataNameTwo.hasOwnProperty(item)) return <td key={idx}>{dataNameTwo[item]}</td>\n                        })}\n                    </tr>\n                </tbody>\n            </table>\n            <hr></hr>\n            {\n                nameTwoArr && nameTwoArr.map(el => {\n                    return (\n                        <div style={{ boxShadow: \"3px 12px 14px 0px #838383\", height: \"25rem\", width: \"20rem\" }} key={el.id}>\n                            <div className=\"cardHeader\" style={{ boxShadow: \"inset 1px -1px 20px 6px #aeced2\", borderBottom: \"1px solid black\" }}>\n                                <div style={{ padding: \"1rem\" }}>\n                                    <div><strong>ID #: {el.id}</strong></div>\n                                    <div><strong>Name: </strong>{el.name}{el.version}</div>\n                                </div>\n                            </div>\n                            <div style={{ boxShadow: \"rgb(210 174 174) 1px -1px 20px 6px inset\" }}>\n                                <div style={{ padding: \"1rem\" }}><div><strong>Email: </strong>{el.email}</div></div>\n                            </div>\n                            <div style={{ boxShadow: \"rgb(210 174 174) 1px -1px 20px 6px inset\" }}>\n                                <div style={{ padding: \"1rem\" }}><div><strong>Address: </strong>{el.address}</div></div>\n                            </div>\n                            <div style={{ boxShadow: \"rgb(210 174 174) 1px -1px 20px 6px inset\" }}>\n                                <div style={{ padding: \"1rem\" }}><div><strong>Created at: </strong>{el.createdAt}</div></div>\n                            </div>\n                            <div style={{ boxShadow: \"rgb(210 174 174) 1px -1px 20px 6px inset\" }}>\n                                <div style={{ padding: \"1rem\" }}><div><strong>updated at: </strong>{el.updatedAt}</div></div>\n                            </div>\n                            <div style={{ boxShadow: \"rgb(210 174 174) 1px -1px 20px 6px inset\" }}>\n                                <div style={{ padding: \"1rem\" }}><div><strong>Published at: </strong>{el.publishedAt}</div></div>\n                            </div>\n\n                        </div>\n                    )\n                })\n            }\n        </>\n    );\n}\n\nexport default App;\n","import ReactDOM from \"react-dom\"\nimport React from \"react\"\nimport App from '../App'\n\nconst ATTRIBUTES = {\n    name: 'name',\n    nameTwo: 'nameTwo',\n    selectedTemplateId: 'selectedTemplateId',\n    selectedContentId: 'selectedContentId',\n    selectedContentName: 'selectedContentName',\n};\n\nclass WidgetElement extends HTMLElement {\n\n    static get observedAttributes() {\n        return Object.values(ATTRIBUTES);\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (!Object.values(ATTRIBUTES).includes(name)) {\n            throw new Error(`Untracked changed attribute: ${name}`);\n        }\n        if (this.mountPoint && newValue !== oldValue) {\n            this.render();\n        }\n    }\n\n    connectedCallback() {\n        this.mountPoint = document.createElement('div');\n        this.appendChild(this.mountPoint);\n        this.render();\n    }\n\n    render() {\n        const name = this.getAttribute(ATTRIBUTES.name);\n        const nameTwo = this.getAttribute(ATTRIBUTES.nameTwo);\n        const templateId = this.getAttribute(ATTRIBUTES.selectedTemplateId);\n        const contentId = this.getAttribute(ATTRIBUTES.selectedContentId);\n        const contentName = this.getAttribute(ATTRIBUTES.selectedContentName);\n        ReactDOM.render(\n            <App name={name} nameTwo={nameTwo} templateId={templateId} contentId={contentId} contentName={contentName} />,\n            this.mountPoint\n        );\n    }\n}\n\ncustomElements.define('my-widget', WidgetElement);\n\nexport default WidgetElement;\n\n"],"sourceRoot":""}